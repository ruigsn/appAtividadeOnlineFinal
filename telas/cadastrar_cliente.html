<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Minha Aplicação - Cadastrar Cliente</title>
  <link rel="stylesheet" href="../assets/css/cadastrar_cliente.css">
  <script type="text/javascript" src="https://npmcdn.com/parse/dist/parse.min.js"></script>
</head>

<body>
  <header>
    <h1>Minha Aplicação - Cadastrar Cliente</h1>
  </header>
  <nav>
    <ul>
      <li><a href="clientes.html">Clientes</a></li>
      <li><a href="produtos.html">Produtos</a></li>
      <li><a href="compras.html">Compras</a></li>
      <li><a href="funcionarios.html">Funcionarios</li>
    </ul>
  </nav>
  <main>
    <h2>Cadastrar Cliente</h2>
    <form id="meuFormulario" action="" method="post">
      <label for="nome">Nome:</label>
      <input type="text" id="nome" name="nome" required>

      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required>

      <!-- <label for="telefone">Telefone:</label>
			<input type="tel" id="telefone" name="telefone" required> -->

      <button type="submit">Cadastrar</button>
    </form>
  </main>
  <footer>
    <p>Desenvolvido por Equipe ADS</p>
  </footer>

  <!-- <script src="../node_modules/parse/dist/parse.min.js"></script> -->

  <script>
    Parse.serverURL = 'https://parseapi.back4app.com'; // This is your Server URL
    // Remember to inform BOTH the Back4App Application ID AND the JavaScript KEY
    Parse.initialize(
      'sIdnfotzGcpvsSYLgKVYehWTFAtEpVs9uC6N6ciH', // This is your Application ID
      'HhMUQhtryM2RuNR4drEV0jfU4kBDwaVA4eDjOMZw' // This is your Javascript key
    );

    const meuFormulario = document.getElementById('meuFormulario');

    meuFormulario.addEventListener('submit', async (event) => {
      event.preventDefault();
      const nomeCliente = document.getElementById('nome').value;
      const emailCliente = document.getElementById('email').value;

      const myNewObject = new Parse.Object('Cliente');
      myNewObject.set('nome', nomeCliente);
      myNewObject.set('email', emailCliente);
      try {
        const result = await myNewObject.save();
        // Access the Parse Object attributes using the .GET method
        console.log('Cliente criado com sucesso', result);
        window.location.href = '../telas/sucesso.html';
      } catch (error) {
        console.error('Error while creating Cliente: ', error);
        window.location.href = '../telas/erro.html';
      }
    });

  </script>

</body>

</html>